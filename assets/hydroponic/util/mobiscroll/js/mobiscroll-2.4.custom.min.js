(function(a){a.widget("mobile.jqmMobiscroll",a.mobile.widget,{options:{theme:"jqm",preset:"date",animate:"pop"},_create:function(){var m=this.element,e=a.extend(this.options,m.jqmData("options"));m.mobiscroll(e)}});a(document).bind("pagebeforecreate",function(m){a('input[type="date"]:jqmData(role="mobiscroll")',m.target).prop("type","text")});a(document).bind("pagecreate create",function(m){a(document).trigger("mobiscrollbeforecreate");a(':jqmData(role="mobiscroll")',m.target).each(function(){"undefined"===
typeof a(this).data("mobiscroll")&&a(this).jqmMobiscroll()})})})(jQuery);(function(a){function m(h,b){function g(h){return a.isArray(k.readonly)?(h=a(".dwwl",p).index(h),k.readonly[h]):k.readonly}function e(a){var h='<div class="dw-bf">',b=1,f;for(f in S[a])0==b%20&&(h+='</div><div class="dw-bf">'),h+='<div class="dw-li dw-v" data-val="'+f+'" style="height:'+H+"px;line-height:"+H+'px;"><div class="dw-i">'+S[a][f]+"</div></div>",b++;return h+"</div>"}function m(){var a=document.body,h=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,h.clientHeight,
h.scrollHeight,h.offsetHeight)}function n(h){t=a(".dw-li",h).index(a(".dw-v",h).eq(0));A=a(".dw-li",h).index(a(".dw-v",h).eq(-1));u=a(".dw-ul",p).index(h);s=H;x=l}function E(a){var h=k.headerText;return h?"function"==typeof h?h.call(L,a):h.replace(/\{value\}/i,a):""}function F(){l.temp=P&&(null!==l.val&&l.val!=y.val()||!y.val().length)||null===l.values?k.parseValue(y.val()||"",l):l.values.slice(0);l.setValue(!0)}function T(h,b,f,d){!1!==J("validate",[p,b])&&a(".dw-ul",p).each(function(f){var k=a(this),
c=a('.dw-li[data-val="'+l.temp[f]+'"]',k),i=a(".dw-li",k).index(c),q=f==b||void 0===b;if(!c.hasClass("dw-v")){for(var g=c,e=0,j=0;g.prev().length&&!g.hasClass("dw-v");)g=g.prev(),e++;for(;c.next().length&&!c.hasClass("dw-v");)c=c.next(),j++;(j<e&&j&&2!==d||!e||!g.hasClass("dw-v")||1==d)&&c.hasClass("dw-v")?i+=j:(c=g,i-=e)}if(!c.hasClass("dw-sel")||q)l.temp[f]=c.attr("data-val"),a(".dw-sel",k).removeClass("dw-sel"),c.addClass("dw-sel"),l.scroll(k,f,i,h)});l.change(f)}function W(){function h(){a(".dwc",
p).each(function(){q=a(this).outerWidth(!0);b+=q;f=q>f?q:f});q=b>c?f:b;q=a(".dwwr",p).width(q+1).outerWidth();j=g.outerHeight()}if("inline"!=k.display){var b=0,f=0,c=a(window).width(),d=window.innerHeight,i=a(window).scrollTop(),g=a(".dw",p),q,l,e,j,I,n={},N,B=void 0===k.anchor?y:k.anchor,d=d||a(window).height();if("modal"==k.display)h(),e=(c-q)/2,l=i+(d-j)/2;else if("bubble"==k.display){h();var M=B.offset(),o=a(".dw-arr",p),r=a(".dw-arrw-i",p),s=g.outerWidth();I=B.outerWidth();e=M.left-(g.outerWidth(!0)-
I)/2;e=e>c-s?c-(s+20):e;e=0<=e?e:20;l=M.top-(g.outerHeight()+3);l<i||M.top>i+d?(g.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),l=M.top+B.outerHeight()+3,N=l+g.outerHeight(!0)>i+d||M.top>i+d):g.removeClass("dw-bubble-bottom").addClass("dw-bubble-top");l=l>=i?l:i;i=M.left+I/2-(e+(s-r.outerWidth())/2);i>r.outerWidth()&&(i=r.outerWidth());o.css({left:i})}else n.width="100%","top"==k.display?l=i:"bottom"==k.display&&(l=i+d-g.outerHeight(),l=0<=l?l:0);n.top=l;n.left=e;g.css(n);a(".dwo, .dw-persp",
p).height(0).height(m());N&&a(window).scrollTop(l+g.outerHeight(!0)-d)}}function J(h,f){var c;f.push(l);a.each([U,b],function(a,b){b[h]&&(c=b[h].apply(L,f))});return c}function ba(a){var h=+a.data("pos")+1;j(a,h>A?t:h,1)}function ca(a){var h=+a.data("pos")-1;j(a,h<t?A:h,2)}var l=this,X=a.mobiscroll,L=h,y=a(L),Y,Z,k=B({},$),U={},aa,H,K,p,S=[],Q={},P=y.is("input"),R=!1;l.enable=function(){k.disabled=!1;P&&y.prop("disabled",!1)};l.disable=function(){k.disabled=!0;P&&y.prop("disabled",!0)};l.scroll=function(a,
h,b,f,c,d){function k(){clearInterval(Q[h]);Q[h]=void 0;a.data("pos",b).closest(".dwwl").removeClass("dwa")}var l=(aa-b)*H,g,d=d||G;a.attr("style",(f?I+"-transition:all "+f.toFixed(1)+"s ease-out;":"")+(i?I+"-transform:translate3d(0,"+l+"px,0);":"top:"+l+"px;"));Q[h]&&k();f&&void 0!==c?(g=0,a.closest(".dwwl").addClass("dwa"),Q[h]=setInterval(function(){g+=0.1;a.data("pos",Math.round((b-c)*Math.sin(g/f*(Math.PI/2))+c));g>=f&&(k(),d())},100),J("onAnimStart",[h,f])):(a.data("pos",b),d())};l.setValue=
function(a,h,b,f){f||(l.values=l.temp.slice(0));R&&a&&T(b);h&&(K=k.formatResult(l.temp),l.val=K,P&&y.val(K).trigger("change"))};l.validate=function(a,h){T(0.2,a,!0,h)};l.change=function(h){K=k.formatResult(l.temp);"inline"==k.display?l.setValue(!1,h):a(".dwv",p).html(E(K));h&&J("onChange",[K])};l.hide=function(h,b){if(!1===J("onClose",[K,b]))return!1;a(".dwtd").prop("disabled",!1).removeClass("dwtd");y.blur();p&&("inline"!=k.display&&k.animate&&!h?(a(".dw",p).addClass("dw-"+k.animate+" dw-out"),setTimeout(function(){p.remove();
p=null},350)):(p.remove(),p=null),R=!1,a(window).unbind(".dw"))};l.cancel=function(){!1!==l.hide(!1,"cancel")&&J("onCancel",[l.val])};l.changeWheel=function(h,b){if(p){var f=0,c,d,i=h.length;for(c in k.wheels)for(d in k.wheels[c]){if(-1<a.inArray(f,h)&&(S[f]=k.wheels[c][d],a(".dw-ul",p).eq(f).html(e(f)),i--,!i)){W();T(b);return}f++}}};l.show=function(h){if(k.disabled||R)return!1;"top"==k.display&&(k.animate="slidedown");"bottom"==k.display&&(k.animate="slideup");F();J("onBeforeShow",[p]);var b=0,
i,q="",I="",m="";k.animate&&!h&&(I='<div class="dw-persp">',m="</div>",q="dw-"+k.animate+" dw-in");q='<div class="'+k.theme+" dw-"+k.display+'">'+("inline"==k.display?'<div class="dw dwbg dwi"><div class="dwwr">':I+'<div class="dwo"></div><div class="dw dwbg '+q+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(k.headerText?'<div class="dwv"></div>':""));for(h=0;h<k.wheels.length;h++){q+='<div class="dwc'+("scroller"!=k.mode?" dwpm":" dwsc")+
(k.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(i in k.wheels[h])S[b]=k.wheels[h][i],q+='<td><div class="dwwl dwrc dwwl'+b+'">'+("scroller"!=k.mode?'<div class="dwwb dwwbp" style="height:'+H+"px;line-height:"+H+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+H+"px;line-height:"+H+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+i+'</div><div class="dww dwrc" style="height:'+k.rows*H+"px;min-width:"+k.width+'px;"><div class="dw-ul">',
q+=e(b),q+='</div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',b++;q+="</tr></table></div></div>"}q+=("inline"!=k.display?'<div class="dwbc'+(k.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+k.setText+"</span></span>"+(k.button3?'<span class="dwbw dwb-n"><span class="dwb">'+k.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+k.cancelText+"</span></span></div>"+m:'<div class="dwcc"></div>')+"</div></div></div>";p=a(q);T();"inline"!=
k.display?p.appendTo("body"):y.is("div")?y.html(p):p.insertAfter(y);R=!0;"inline"!=k.display&&(a(".dwb-s span",p).click(function(){if(l.hide(false,"set")!==false){l.setValue(false,true);J("onSelect",[l.val])}}),a(".dwb-c span",p).click(function(){l.cancel()}),k.button3&&a(".dwb-n span",p).click(k.button3),k.scrollLock&&p.bind("touchmove",function(a){a.preventDefault()}),a("input,select,button").each(function(){a(this).prop("disabled")||a(this).addClass("dwtd")}),a("input,select").prop("disabled",
!0),W(),a(window).bind("resize.dw",W));p.delegate(".dwwl","DOMMouseScroll mousewheel",function(h){if(!g(this)){h.preventDefault();var h=h.originalEvent,h=h.wheelDelta?h.wheelDelta/120:h.detail?-h.detail/3:0,b=a(".dw-ul",this),f=+b.data("pos"),f=Math.round(f-h);n(b);j(b,f,h<0?1:2)}}).delegate(".dwb, .dwwb",N,function(){a(this).addClass("dwb-a")}).delegate(".dwwb",N,function(h){var b=a(this).closest(".dwwl");if(!g(b)&&!b.hasClass("dwa")){h.preventDefault();h.stopPropagation();var f=b.find(".dw-ul"),
c=a(this).hasClass("dwwbp")?ba:ca;C=true;n(f);clearInterval(v);v=setInterval(function(){c(f)},k.delay);c(f)}}).delegate(".dwwl",N,function(h){h.preventDefault();if(!z&&!g(this)&&!C&&k.mode!="clickpick"){z=true;r=a(".dw-ul",this);r.closest(".dwwl").addClass("dwa");d=+r.data("pos");n(r);c=Q[u]!==void 0;D=o(h);f=new Date;w=D;l.scroll(r,u,d)}});J("onShow",[p,K]);Y.init(p,l)};l.init=function(a){Y=B({defaults:{},init:G},X.themes[a.theme||k.theme]);Z=X.i18n[a.lang||k.lang];B(b,a);B(k,Y.defaults,Z,b);l.settings=
k;y.unbind(".dw");if(a=X.presets[k.preset])U=a.call(L,l),B(k,U,b),B(V,U.methods);aa=Math.floor(k.rows/2);H=k.height;void 0!==y.data("dwro")&&(L.readOnly=O(y.data("dwro")));R&&l.hide();"inline"==k.display?l.show():(F(),P&&k.showOnFocus&&(y.data("dwro",L.readOnly),L.readOnly=!0,y.bind("focus.dw",function(){l.show()})))};l.values=null;l.val=null;l.temp=null;l.init(b)}function e(a){for(var f in a)if(void 0!==b[a[f]])return!0;return!1}function o(a){var b=a.originalEvent,f=a.changedTouches;return f||b&&
b.changedTouches?b?b.changedTouches[0].pageY:f[0].pageY:a.pageY}function O(a){return!0===a||"true"==a}function E(a,b,f){a=a>f?f:a;return a<b?b:a}function j(h,b,f,c,d){var b=E(b,t,A),i=a(".dw-li",h).eq(b),g=u,c=c?b==d?0.1:Math.abs(0.1*(b-d)):0;x.scroll(h,g,b,c,d,function(){x.temp[g]=i.attr("data-val");x.validate(g,f)})}function n(a,b,f){return V[b]?V[b].apply(a,Array.prototype.slice.call(f,1)):"object"===typeof b?V.init.call(a,b):a}var g={},v,G=function(){},s,t,A,x,F=(new Date).getTime(),z,C,r,u,D,
w,f,d,c,b=document.createElement("modernizr").style,i=e(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),I=function(){var a=["Webkit","Moz","O","ms"],b;for(b in a)if(e([a[b]+"Transform"]))return"-"+a[b].toLowerCase();return""}(),B=a.extend,N="touchstart mousedown",$={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",
cancelText:"Cancel",scrollLock:!0,formatResult:function(a){return a.join(" ")},parseValue:function(a,b){var f=b.settings.wheels,c=a.split(" "),d=[],i=0,g,e,j;for(g=0;g<f.length;g++)for(e in f[g]){if(void 0!==f[g][e][c[i]])d.push(c[i]);else for(j in f[g][e]){d.push(j);break}i++}return d}},V={init:function(a){void 0===a&&(a={});return this.each(function(){this.id||(F+=1,this.id="scoller"+F);g[this.id]=new m(this,a)})},enable:function(){return this.each(function(){var a=g[this.id];a&&a.enable()})},disable:function(){return this.each(function(){var a=
g[this.id];a&&a.disable()})},isDisabled:function(){var a=g[this[0].id];if(a)return a.settings.disabled},option:function(a,b){return this.each(function(){var f=g[this.id];if(f){var c={};"object"===typeof a?c=a:c[a]=b;f.init(c)}})},setValue:function(a,b,f,c){return this.each(function(){var d=g[this.id];d&&(d.temp=a,d.setValue(!0,b,f,c))})},getInst:function(){return g[this[0].id]},getValue:function(){var a=g[this[0].id];if(a)return a.values},show:function(){var a=g[this[0].id];if(a)return a.show()},
hide:function(){return this.each(function(){var a=g[this.id];a&&a.hide()})},destroy:function(){return this.each(function(){var b=g[this.id];b&&(b.hide(),a(this).unbind(".dw"),delete g[this.id],a(this).is("input")&&(this.readOnly=O(a(this).data("dwro"))))})}};a(document).bind("touchmove mousemove",function(a){z&&(a.preventDefault(),w=o(a),x.scroll(r,u,E(d+(D-w)/s,t-1,A+1)),c=!0)});a(document).bind("touchend mouseup",function(b){if(z){b.preventDefault();var i=new Date-f,b=E(d+(D-w)/s,t-1,A+1),g;g=r.offset().top;
300>i?(i=(w-D)/i,i=i*i/0.0012,0>w-D&&(i=-i)):i=w-D;if(!i&&!c){g=Math.floor((w-g)/s);var e=a(".dw-li",r).eq(g);e.addClass("dw-hl");setTimeout(function(){e.removeClass("dw-hl")},200)}else g=Math.round(d-i/s);j(r,g,0,!0,Math.round(b));z=!1;r=null}C&&(clearInterval(v),C=!1);a(".dwb-a").removeClass("dwb-a")});a.fn.mobiscroll=function(b){B(this,a.mobiscroll.shorts);return n(this,b,arguments)};a.mobiscroll=a.mobiscroll||{setDefaults:function(a){B($,a)},presetShort:function(a){this.shorts[a]=function(b){return n(this,
B(b,{preset:a}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}};a.scroller=a.scroller||a.mobiscroll;a.fn.scroller=a.fn.scroller||a.fn.mobiscroll})(jQuery);(function(a){var m={inputClass:"",invalid:[],rtl:!1,group:!1,groupLabel:"Groups"};a.mobiscroll.presetShort("select");a.mobiscroll.presets.select=function(e){function o(a){return a?a.replace(/_/,""):""}function O(){var f,d=0,c={},b=[{}];j.group?(j.rtl&&(d=1),a("optgroup",n).each(function(b){c["_"+b]=a(this).attr("label")}),b[d]={},b[d][j.groupLabel]=c,f=v,d+=j.rtl?-1:1):f=n;b[d]={};b[d][F]={};a("option",f).each(function(){var f=a(this).attr("value");b[d][F]["_"+f]=a(this).text();a(this).prop("disabled")&&
z.push(f)});return b}var E=e.settings,j=a.extend({},m,E),n=a(this),g=n.val(),v=n.find('option[value="'+n.val()+'"]').parent(),G=v.index()+"",s=G,t,A=this.id+"_dummy";a('label[for="'+this.id+'"]').attr("for",A);var x=a('label[for="'+A+'"]'),F=void 0!==j.label?j.label:x.length?x.text():n.attr("name"),z=[],C={},r,u,D=E.readonly;j.group&&!a("optgroup",n).length&&(j.group=!1);j.invalid.length||(j.invalid=z);j.group?j.rtl?(r=1,u=0):(r=0,u=1):(r=-1,u=0);a("#"+A).remove();a("option",n).each(function(){C[a(this).attr("value")]=
a(this).text()});var w=a('<input type="text" id="'+A+'" value="'+C[n.val()]+'" class="'+j.inputClass+'" readonly />').insertBefore(n);j.showOnFocus&&w.focus(function(){e.show()});n.bind("change",function(){!t&&g!=n.val()&&e.setSelectVal([n.val()],true);t=false}).hide().closest(".ui-field-contain").trigger("create");e.setSelectVal=function(a,d,c){g=a[0];if(j.group){v=n.find('option[value="'+g+'"]').parent();s=v.index();e.temp=j.rtl?["_"+g,"_"+v.index()]:["_"+v.index(),"_"+g];if(s!==G){E.wheels=O();
e.changeWheel([u]);G=s+""}}else e.temp=["_"+g];e.setValue(true,d,c);if(d){w.val(C[g]);a=g!==n.val();n.val(g);a&&n.trigger("change")}};e.getSelectVal=function(a){return o((a?e.temp:e.values)[u])};return{width:50,wheels:void 0,headerText:!1,anchor:w,formatResult:function(a){return C[o(a[u])]},parseValue:function(){g=n.val();v=n.find('option[value="'+g+'"]').parent();s=v.index();return j.group&&j.rtl?["_"+g,"_"+s]:j.group?["_"+s,"_"+g]:["_"+g]},validate:function(f,d){if(d===r){s=o(e.temp[r]);if(s!==
G){v=n.find("optgroup").eq(s);s=v.index();g=(g=v.find("option").eq(0).val())||n.val();E.wheels=O();if(j.group){e.temp=j.rtl?["_"+g,"_"+s]:["_"+s,"_"+g];e.changeWheel([u]);G=s+""}}E.readonly=D}else g=o(e.temp[u]);var c=a(".dw-ul",f).eq(u);a.each(j.invalid,function(b,f){a('.dw-li[data-val="_'+f+'"]',c).removeClass("dw-v")})},onAnimStart:function(a){if(a===r)E.readonly=[j.rtl,!j.rtl]},onBeforeShow:function(){E.wheels=O();if(j.group)e.temp=j.rtl?["_"+g,"_"+v.index()]:["_"+v.index(),"_"+g]},onSelect:function(a){w.val(a);
t=true;n.val(o(e.values[u])).trigger("change");if(j.group)e.values=null},onCancel:function(){if(j.group)e.values=null},onChange:function(a){if(j.display=="inline"){w.val(a);t=true;n.val(o(e.temp[u])).trigger("change")}},onClose:function(){w.blur()},methods:{setValue:function(f,d,c){return this.each(function(){var b=a(this).mobiscroll("getInst");if(b)if(b.setSelectVal)b.setSelectVal(f,d,c);else{b.temp=f;b.setValue(true,d,c)}})},getValue:function(f){var d=a(this).mobiscroll("getInst");if(d)return d.getSelectVal?
d.getSelectVal(f):d.values}}}}})(jQuery);(function(a){a.mobiscroll.themes.jqm={defaults:{jqmBorder:"a",jqmBody:"c",jqmHeader:"b",jqmWheel:"d",jqmClickPick:"c",jqmSet:"b",jqmCancel:"c"},init:function(m,e){var o=e.settings;a(".dw",m).removeClass("dwbg").addClass("ui-overlay-shadow ui-corner-all ui-body-"+o.jqmBorder);a(".dwb-s span",m).attr("data-role","button").attr("data-theme",o.jqmSet);a(".dwb-n span",m).attr("data-role","button").attr("data-theme",o.jqmCancel);a(".dwb-c span",m).attr("data-role","button").attr("data-theme",o.jqmCancel);
a(".dwwb",m).attr("data-role","button").attr("data-theme",o.jqmClickPick);a(".dwv",m).addClass("ui-header ui-bar-"+o.jqmHeader);a(".dwwr",m).addClass("ui-body-"+o.jqmBody);a(".dwpm .dww",m).addClass("ui-body-"+o.jqmWheel);"inline"!=o.display&&a(".dw",m).addClass("pop in");m.trigger("create");a(".dwo",m).click(function(){e.cancel()})}}})(jQuery);(function(a){a.mobiscroll.themes.ios={defaults:{dateOrder:"MMdyy",rows:5,height:30,width:55,headerText:!1,showLabel:!1}}})(jQuery);(function(a){var m={defaults:{dateOrder:"Mddyy",mode:"mixed",rows:5,width:70,height:36,showLabel:!1}};a.mobiscroll.themes["android-ics"]=m;a.mobiscroll.themes["android-ics light"]=m})(jQuery);(function(a){a.mobiscroll.themes.android={defaults:{dateOrder:"Mddyy",mode:"clickpick",height:50}}})(jQuery);(function(a){a.mobiscroll.themes.wp={defaults:{width:70,height:76,dateOrder:"mmMMddDDyy"},init:function(m){var e,o;a(".dwwl",m).bind("touchstart mousedown DOMMouseScroll mousewheel",function(){e=!0;o=a(this).hasClass("wpa");a(".dwwl",m).removeClass("wpa");a(this).addClass("wpa")}).bind("touchmove mousemove",function(){e=!1}).bind("touchend mouseup",function(){e&&o&&a(this).removeClass("wpa")})}};a.mobiscroll.themes["wp light"]=a.mobiscroll.themes.wp})(jQuery);(function(a){var m=a.mobiscroll,e={invalid:[],showInput:!0,inputClass:""},o=function(m){function o(f,d,c,b){for(var i=0;i<d;){var g=a(".dwwl"+i,f),e=j(b,i,c);a.each(e,function(b,f){a('.dw-li[data-val="'+f+'"]',g).removeClass("dw-v")});i++}}function j(a,d,c){for(var b=0,i=[];b<d;){var g=a[b],e;for(e in c)if(c[e].key==g){c=c[e].children;break}b++}for(b=0;b<c.length;)c[b].invalid&&i.push(c[b].key),b++;return i}function n(a,d,c){var b=0,i,e,m=[{}],j=r;if(d)for(i=0;i<d;i++)m[i]={},m[i][u[i]]={};for(;b<
a.length;){m[b]={};i=m[b];for(var d=u[b],n=j,o={},h=0;h<n.length;)o[n[h].key]=n[h++].value;i[d]=o;i=0;for(d=void 0;i<j.length&&void 0===d;){if(j[i].key==a[b]&&(void 0!==c&&b<=c||void 0===c))d=i;i++}if(void 0!==d&&j[d].children)b++,j=j[d].children;else if((e=g(j))&&e.children)b++,j=e.children;else break}return m}function g(a,d){if(!a)return!1;for(var c=0,b;c<a.length;)if(!(b=a[c++]).invalid)return d?c-1:b;return!1}function v(f,d){a(".dwc",f).css("display","").slice(d).hide()}function G(a,d){var c=
[],b=r,i=0,e=!1,m,j;if(void 0!==a[i]&&i<=d){e=0;m=a[i];for(j=void 0;e<b.length&&void 0===j;)b[e].key==a[i]&&!b[e].invalid&&(j=e),e++}else j=g(b,!0),m=b[j].key;e=void 0!==j?b[j].children:!1;for(c[i]=m;e;){b=b[j].children;i++;if(void 0!==a[i]&&i<=d){e=0;m=a[i];for(j=void 0;e<b.length&&void 0===j;)b[e].key==a[i]&&!b[e].invalid&&(j=e),e++}else j=g(b,!0),j=!1===j?void 0:j,m=b[j].key;e=void 0!==j&&g(b[j].children)?b[j].children:!1;c[i]=m}return{lvl:i+1,nVector:c}}function s(f){var d=[];z=z>C++?z:C;f.children("li").each(function(f){var b=
a(this),i=b.clone();i.children("ul,ol").remove();var i=i.html().replace(/^\s\s*/,"").replace(/\s\s*$/,""),g=b.data("invalid")?!0:!1,f={key:b.data("val")||f,value:i,invalid:g,children:null},b=b.children("ul,ol");b.length&&(f.children=s(b));d.push(f)});C--;return d}var t=a.extend({},e,m.settings),A=a(this),x,F=this.id+"_dummy",z=0,C=0,r=t.wheelArray||s(A),u=function(a){var d=[],c;for(c=0;c<a;c++)d[c]=t.labels&&t.labels[c]?t.labels[c]:c;return d}(z),D=[],w=function(a){for(var d=[],c,b=!0,i=0;b;)if(c=
g(a),d[i++]=c.key,b=c.children)a=c.children;return d}(r),w=n(w,z);a("#"+F).remove();t.showInput&&(x=a('<input type="text" id="'+F+'" value="" class="'+t.inputClass+'" readonly />').insertBefore(A),m.settings.anchor=x,t.showOnFocus&&x.focus(function(){m.show()}));t.wheelArray||A.hide().closest(".ui-field-contain").trigger("create");return{width:50,wheels:w,headerText:!1,onBeforeShow:function(){var a=m.temp;D=m.temp.slice(0);m.settings.wheels=n(a,z,z)},onSelect:function(a){x&&x.val(a)},onChange:function(a){x&&
t.display=="inline"&&x.val(a)},onClose:function(){x&&x.blur()},onAnimStart:function(a){for(var d=m.settings,c=z,b=[];c;)b[--c]=true;b[a]=false;d.readonly=b},validate:function(a,d){var c=m.temp;if(d!==void 0&&D[d]!=c[d]){m.settings.wheels=n(c,null,d);var b=[],g=d,e=G(c,d);for(m.temp=e.nVector.slice(0);g<e.lvl;)b.push(g++);v(a,e.lvl);m.changeWheel(b);D=m.temp.slice(0);o(a,e.lvl,r,m.temp)}else{e=G(c,c.length);o(a,e.lvl,r,c);v(a,e.lvl)}m.settings.readonly=false}}};a.each(["list","image","treelist"],function(a,
e){m.presets[e]=o;m.presetShort(e)})})(jQuery);
